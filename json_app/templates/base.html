{% load staticfiles %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Graphic chart</title>

    <!-- Bootstrap core CSS -->
      <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
      <!--<link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet" >-->

    <!-- Custom styles for this template -->
       <link href="{% static 'css/jumbotron-narrow.css' %}" rel="stylesheet">
      <script src="{% static 'js/bootstrap.min.js' %}"></script>
      <script src="{% static 'js/amcharts.js' %}"></script>
      <script src="{% static 'js/serial.js' %}"></script>
      <script src="{% static 'js/none.js' %}"></script>

      <style>
          #chartdiv {
          width		: 100%;
          height	: 500px;
          font-size	: 11px;
          }
      </style>




      {% for city in all_cities %}

      <script>
          var city = "{{city.name|safe}}"
          var city_area = "{{city.area|safe}}"
          var chart = AmCharts.makeChart("chartdiv", {
    "type": "serial",
    "theme": "none",
    "dataProvider": [{
        "country": city,
        "area": city_area
    }],
    "valueAxes": [{
        "gridColor":"#FFFFFF",
		"gridAlpha": 0.2,
		"dashLength": 0
    }],
    "gridAboveGraphs": true,
    "startDuration": 1,
    "graphs": [{
        "balloonText": "[[category]]: <b>[[value]]</b>",
        "fillAlphas": 0.8,
        "lineAlpha": 0.2,
        "type": "column",
        "valueField": "area"
    }],
    "chartCursor": {
        "categoryBalloonEnabled": false,
        "cursorAlpha": 0,
        "zoomable": false
    },
    "categoryField": "country",
    "categoryAxis": {
        "gridPosition": "start",
        "gridAlpha": 0,
         "tickPosition":"start",
         "tickLength":20
    },
	"exportConfig":{
	  "menuTop": 0,
	  "menuItems": [{
      "icon": '/lib/3/images/export.png',
      "format": 'png'
      }]
	}
});
          var obj = JSON.parse(chart);
      obj['dataProvider'].push({"country":city,"area":city_area});
      </script>

{% endfor %}


  </head>

  <body>

    <div class="container">
      <div class="header clearfix">
        <nav>
          <ul class="nav nav-pills pull-right">
            <li role="presentation" class="active"><a href="#">Home</a></li>
            <li role="presentation"><a href="#">About</a></li>
            <li role="presentation"><a href="#">Contact</a></li>
          </ul>
        </nav>
        <h3 class="text-muted">Graphic chart</h3>
      </div>

      <div class="jumbotron">
        <h2>City Area Chart</h2>
          <br>
          <form action="/open_file" method="post" enctype="multipart/form-data">
               {% csrf_token %}
              <div class="form-group">
                <label class="col-sm-2 control-label table-cell" for="exampleInputFile">File input</label>
                  <div class="col-sm-10" style="width: 250px;">
                      <div class="ddl">
                          <div class="input-group table-cell">
                              <input type="file" id="exampleInputFile" name="form_object">

                          </div>
                      </div>
                  </div>
              </div>
              <button type="submit" class="btn-sm btn-success">Submit</button>
          </form>
      </div>

      <div class="row marketing">
        <div>

            {% block content %}
            {% endblock %}

        </div>
      </div>




      <footer class="footer">
        <p>&copy; Company 2014</p>
      </footer>

    </div> <!-- /container -->



  </body>
</html>
